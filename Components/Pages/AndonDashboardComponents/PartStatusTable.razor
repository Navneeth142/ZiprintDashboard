@using BlazorAssignment.Models

<div class="part-status-card">

    <div class="part-status-header">
        <div>Part Number</div>
        <div>Count / Target</div>
        <div>% Completion</div>
    </div>

    @foreach (var p in Parts)
    {
        bool isSelected = SelectedParts.Contains(p.PartNo);

        <div class="part-row @(isSelected ? "active" : "")"
             @onclick="() => OnPartToggled.InvokeAsync(p.PartNo)">

            <div class="part-no">@p.PartNo</div>

            <div class="count">@p.Count/@p.Target</div>

            <div class="progress-cell">
                <span class="percent">
                    @Math.Round((double)p.Count / p.Target * 100, 1)%
                </span>

                <div class="progress-bar">
                    <div class="progress-fill"
                         style="width:@Math.Round((double)p.Count / p.Target * 100,1)%">
                    </div>
                </div>
            </div>
        </div>
    }
</div>

@code {
    [Parameter] public List<PartStatus> Parts { get; set; } = [];
    [Parameter] public List<string> SelectedParts { get; set; } = [];
    [Parameter] public EventCallback<string> OnPartToggled { get; set; }
}
